# docker-compose.yml - Version minimale pour tester Auth-Service uniquement
services:
  # Auth Service
  auth-service:
    build: ./Auth-Service
    container_name: auth-service
    ports:
      - "5009:5009"
    environment:
      - FLASK_HOST=0.0.0.0
      - FLASK_PORT=5009
      - FLASK_DEBUG=true
      - USE_DOCKER=false  # لأننا نختبر فقط
      - SECRET_KEY=clinique2025_secure_key
    volumes:
      - ./Auth-Service/instance:/app/instance
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5009/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

# إذا أردت إضافة الخدمات الأخرى لاحقًا، احذف التعليق:
#
#  patients-service:
#    build: ./Patients-Service
#    container_name: patients-service
#    ports:
#      - "5001:5001"
#    environment:
#      - FLASK_HOST=0.0.0.0
#      - FLASK_PORT=5001
#      - USE_DOCKER=true
#    volumes:
#      - ./Patients-Service/instance:/app/instance
#    restart: unless-stopped
#
#  rdv-backend:
#    build: ./RDV-Service
#    container_name: rdv-backend
#    ports:
#      - "5005:5005"
#    environment:
#      - FLASK_HOST=0.0.0.0
#      - FLASK_PORT=5005
#      - USE_DOCKER=true
#    volumes:
#      - ./RDV-Service/instance:/app/instance
#    restart: unless-stopped